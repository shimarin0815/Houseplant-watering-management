LeafLog — 観葉植物 水やり管理（Single HTML SPA）

ローカルストレージだけで動く・通知対応・フレームワーク不要。
1ファイルの HTML をブラウザで開くだけで、水やりサイクルを気持ちよく管理できます。

目次

デモ / 最速お試し

特徴

学べること（教育目的）

動作要件

クイックスタート

VS Code 手順

使い方

バックアップ / 復元

通知について

データ仕様

設計メモ

アクセシビリティ

トラブルシューティング

FAQ

発展アイデア（ロードマップ）

ライセンス

デモ / 最速お試し

そのまま開けるサンプル：leaflog.html をダウンロード
ダブルクリックでブラウザ（Chrome/Edge/Safari）で開けます。

環境テスト用：test.html — HTMLプレビューが正常か確認できます。

リポジトリ運用では leaflog.html をそのまま置くだけでOK。ビルド不要です。

特徴

シングルファイル：leaflog.html だけで完結（HTML/CSS/JS 内蔵）

ローカルストレージ保存：ユーザー登録やサーバー不要、オフラインOK

通知：次回水やりの期日を過ぎたらデスクトップ通知（許可時）

モダンUI：ガラス風パネル、ステータスチップ、モーダルフォーム

フィルタ：期限到来 / 24時間以内 / 余裕あり / すべて

バックアップ：JSON エクスポート／インポート

テーマ：ライト / ダーク切替

アクセシビリティ：aria-*、dialog 要素、ライブリージョン

学べること（教育目的）

状態管理の基礎：「配列を更新→UI再描画」というリアクティブ発想

日付処理：最後の水やり日＋間隔（日）＝次回日を算出

ブラウザAPI：localStorage、Notification、setInterval

UI設計：カードレイアウト、ラベル、モーダル、フィルタの組み合わせ

中学生向けミニ解説

データはブラウザの「引き出し（localStorage）」に保存されます。

「前回の日」＋「何日おき？」を足して「次の水やり日」を出します。

パソコンが動いているあいだ、1分ごとに「そろそろ？」をチェックします。

動作要件

ブラウザ：最新の Chrome / Edge / Safari

通知はブラウザの許可が必要。タブやブラウザを閉じると通知は止まります。

OS：Windows / macOS / Linux

ネットワーク：不要（完全ローカル）

クイックスタート

leaflog.html を用意（右上のファイル、または自作）

ダブルクリックでブラウザで開く
（VS Codeの Live Server でも可）

右上の ＋ 植物を追加 から登録

水やりしたらカードの 💧 今水やり を押す

🔔 通知 を押して許可（任意）

VS Code 手順

VS Code を起動 → 作業フォルダを開く

新規ファイルに leaflog.html を保存（拡張子 .html 必須）

Live Server を使う場合

拡張機能をインストール → 右下 Go Live

自動でブラウザが開きます

使わない場合は leaflog.html をダブルクリックで開くだけ

使い方

植物を追加：名前・種類（任意）・水やり間隔（日）・最後の日・メモ

状態ラベル

⏰ 期限到来：もう水やりするタイミング

🟡 もうすぐ：24時間以内に期日到来

🟢 余裕あり：まだ先でOK

フィルタ：上部の「すべて / 期限到来 / 24時間以内 / 余裕あり」

テーマ切替：🌗 ボタン

今水やり：💧 を押すと「今日」を最後の日として記録、次回日を自動更新

編集 / 削除：✏️ / 🗑️

バックアップ / 復元

💾 バックアップ：現在の植物データを JSON としてダウンロード

⤴️ 復元：バックアップ JSON を選択して読み込み

バックアップ JSON（例）:

[
  {
    "id": "p_xxxxx",
    "name": "レオン",
    "species": "ポトス",
    "freq": 7,
    "last": "2025-09-30T00:00:00.000Z",
    "next": "2025-10-07T00:00:00.000Z",
    "notes": "北側の窓辺。乾いたらたっぷり。",
    "notifiedFor": null,
    "createdAt": "2025-09-30T12:34:56.000Z"
  }
]

通知について

右上の 🔔 から「通知を許可」してください。

期日を過ぎた植物があれば、1回だけデスクトップ通知します（同じ期日で重複しない）。

ブラウザやタブを閉じると通知は動きません。

バックグラウンド通知までやるには PWA + サービスワーカーが必要（本プロジェクトは「単一HTML」の学習用のため未対応）。

データ仕様

保存先：localStorage

キー：leaflog_plants_v1

スキーマ：

フィールド	型	説明
id	string	一意ID
name	string	植物名
species	string	種類（任意）
freq	number	水やり間隔（日）
last	Date	最後の水やり日（保存時は ISO 文字列）
next	Date	次回水やり日（保存時は ISO 文字列）
notes	string	メモ
notifiedFor	string?	直近で通知済みの期日（ISO）。重複防止用
createdAt	string	作成日時（ISO）

次回日の計算
next = last + freq（日）

設計メモ

技術構成：純粋な HTML + CSS + Vanilla JS（依存なし）

状態管理：store オブジェクトを Proxy で監視 → 変更時に render()

描画：フィルタ／ソート後にカードを組み立てて DOM に反映

スタイル：CSS 変数（テーマカラー、角丸、影）＋ ガラスモーフィズム

永続化：配列を JSON 化して localStorage に保存

通知：Notification API、1分ごとに期日チェック

アクセシビリティ

aria-live="polite" によるカード更新の告知

dialog 要素でモーダル実装（Escで閉じる等が標準サポート）

フィルタは aria-pressed を切り替えるトグルUI

ラベルやボタンにタイトル・テキストを付与

トラブルシューティング

画面が真っ白

ブラウザを最新に。leaflog.html をダブルクリックで開けるか確認。

ソース文字列が見える

テキストエディタで開いている可能性。ブラウザで開いてください。

通知が出ない

右上の🔔で「許可」したか確認。ブラウザやタブを閉じると通知は動きません。

データが消えた

ブラウザのサイトデータ削除・別ブラウザ使用で localStorage が空になることがあります。バックアップJSONの活用を。

コンソールにエラー

F12 → Console の赤文字を確認して、内容を Issue に貼り付けてください。

FAQ

Q. 複数端末で同期できますか？
A. いいえ。localStorage は端末ごと・ブラウザごとです。JSON で手動同期は可能です。

Q. 日付を時刻まで細かく扱えますか？
A. 現状は「日」単位。必要なら last と freq を時間ベースに拡張できます。

Q. スマホでも使えますか？
A. 使えますが、通知など一部機能は端末やブラウザの制限を受けます。PCのChrome/Edgeが安定。

発展アイデア（ロードマップ）

 端末間同期（IndexedDB + Cloud・またはファイル自動エクスポート）

 PWA 化（オフライン配信・バックグラウンド通知・ホーム画面追加）

 画像添付（葉の状態記録）、タグ、並び替え・検索

 週次レポート出力（CSV/ICS）

 多言語対応（i18n）

 キーボード操作拡充（ショートカット）

ライセンス
